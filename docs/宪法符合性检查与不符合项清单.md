# 宪法符合性检查与不符合项清单

**依据**：《00_【最高宪法】SuperPaaS-God v8.0》《01_【核心法律】基础与AI安全宪法》V3.0  
**范围**：全项目（platform_core、cells、frontend、frontend-admin、deploy、docs、glass_house）  
**用途**：整合两宪法要求，逐条核对并列出**不符合项**与**待完善项**，便于排期整改。

---

## 一、技术栈与架构（01 1.1 / 1.1.1）

| 条款 | 要求 | 现状 | 符合性 |
|------|------|------|--------|
| 01 1.1 | Java 17+、Spring Boot 3+、DDD 分层 | 平台核心与细胞为 Python/Flask | **符合**：01 1.1.1 明确「PaaS 网关、注册中心、监控中心可选用其他 LTS 技术栈（如 Python 3.11+）」，当前实现满足其余全部条款，选型已在架构文档中说明。 |
| 01 1.1.1 | 业务细胞仍鼓励优先采用 1.1 技术栈 | 细胞为 Python/Flask 或 FastAPI | **待优化**：若需与 01 1.1 完全一致（无例外），可单独立项将平台核心或细胞迁 Java；非强制。 |

---

## 二、不符合项（须整改或落档）

### 1. 【00 修正案 #4 / 01 2.2】敏感数据加密与脱敏 — 部分细胞未实施

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 敏感字段 AES-256 或国密 SM4 加密；界面/日志动态脱敏，严禁明文完整展示 | 《敏感数据加密与脱敏规范》已发布；CRM/HIS/TMS 等已实现脱敏（masking）；**《敏感数据实施清单》已新增**，按细胞跟踪实施状态 | **部分符合**：规范与实施清单已落档；多数细胞仍待按 C4 落实加密与脱敏。**整改**：按《敏感数据实施清单》与 C4 逐细胞推广。 |

### 2. 【00 修正案 #6 / 01 7.6.1】跨细胞最终一致性 — 无平台级消息队列

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 禁止同步强一致；必须「消息队列 + 最大努力通知 + 人工对账」 | **《事件总线与跨细胞异步规范》已新增**；网关已提供 **POST/GET /api/events Stub**（占位）；细胞间无同步调用 | **部分符合**：接口契约与 Stub 已落档，满足「接口先行」；生产需 P5 对接真实 MQ、C6 细胞发布/订阅。 |

### 3. 【00 修正案 #12 / #13】零心智负担与操作路径 — 未全量验收

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 操作路径深度不得超过 3 层；超过 3 次点击须 AI 一键自动化；意图预判 | **《零心智负担与3-Click验收清单》已新增**，含验收标准与示例模块表；AI 一键自动化与意图预判为规划项 | **部分符合**：3-Click 验收清单已落档，可随发布走查；AI 能力仍按产品路线图落地。 |

### 4. 【00 修正案 #14 / 01 4.1】安全态势可视化 — 未完全落地

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 登录/支付/敏感操作时「安全态势可视化」（如登录地点地图、国密盾传输动画）；用户可查「谁在何时访问了我的数据」 | **客户端已新增 SecurityStatus 组件**（安全态势区域+国密盾占位）；**网关已提供 GET /api/admin/audit**（占位/示例数据）；管理端审计页已对接该 API | **部分符合**：安全态势区域与审计 API 对接已完成占位；登录地点地图、完整国密盾动画可按 C5 后续增强。 |

### 5. 【00 修正案 #15】细胞壁强化（沙箱体检）— 未实现

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 任何插件（乐高积木）在运行前必须先通过「沙箱体检」，有毒（漏洞）的积木不能上桌 | **《插件与细胞准入-沙箱体检设计》已新增**，约定检查项与实现路径；当前无插件热插拔 | **已落档**：架构预留条款已写入设计文档，实现时按该文档落地。 |

### 6. 【00 修正案 #16 / 01】暗色模式与无障碍 — 部分符合

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 系统必须原生支持暗色模式；必须支持无障碍访问（读屏软件可用） | 暗色模式已实现；**《WCAG2.1无障碍验收清单》已新增**；Layout/AdminLayout 已补充 aria-label（导航、主题、退出、一键求救） | **部分符合**：暗色与无障碍清单已落档；读屏与键盘全量测试待随迭代执行。 |

### 7. 【01 4.2】魔法盾（异地登录、设备指纹、蜜罐）— 未实现

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 异地登录拦截、设备指纹识别、蜜罐服务 | 网关为 Mock 登录；无异地登录检测、设备指纹、蜜罐 | **不符合**：01 4.2 要求主动防御机制。**整改**：见《待补充项清单》O4，可先做占位与接口设计。 |

### 8. 【01 4.3】一键求救（Panic Button）— 未实现

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 紧急响应：踢出所有会话、冻结资金与数据流出、锁屏、告警、通知安全团队 | **网关已提供 POST /api/admin/panic**（占位：记录日志并返回 200）；**管理端已增加「一键求救」按钮**（AdminLayout），触发后调用该 API | **部分符合**：占位接口与前端按钮已实现；生产需对接真实会话踢出、冻结、锁屏与安全团队通知。 |

### 9. 【01 3.x】AI 原生与智能交互 — 未实现

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 管家式 AI、意图预判、语音优先、零 Prompt、鹰眼预警、智能纠错、后悔药 30 天、低代码 AI 集成 | 无 AI 对话、语音、自动纠错、30 天撤销等实现 | **不符合**：01 第三部分整章为 AI 原生能力，当前为规划与文档。**整改**：按产品路线图分阶段落地；可在《待补充项清单》中单列 AI 专项。 |

### 10. 【01 5.1】GDPR 与隐私 — 未全量落地

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 被遗忘权（一键删除用户全部数据痕迹）；隐私计算/硬件级数据隔离 | **《GDPR与三权分立设计》已新增**，约定用户数据导出/删除接口（如 DELETE /api/admin/users/{id}/gdpr-erase、GET /api/privacy/export） | **已落档**：接口与流程约定已写入设计文档；各细胞/平台实现时按该文档提供接口。 |

### 11. 【01 5.2】三权分立 — 未实现

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| 系统管理员、安全管理员、审计员账号权限分离 | **《GDPR与三权分立设计》已新增**，定义三角色职责与权限设计要点；当前网关仍为 Mock 用户 | **已落档**：角色与权限设计已写入设计文档；认证与权限模型扩展时按该文档落地。 |

### 12. 【01 6.1 / 6.2】性能与容灾 — 未验收

| 要求 | 现状 | 不符合说明 |
|------|------|------------|
| P99≤200ms、10 万级并发、SLA 99.99%；同城双活 RPO=0、RTO≤30s；异地容灾；每月故障演练 | 无全平台性能基准与容灾演练报告 | **不符合**：01 第六部分为性能与可用性宪法，当前未做达标验收。**整改**：性能压测与容灾方案单独立项，满足商用前验收。 |

---

## 三、已符合项（简要）

- **00 元规则 #7 集装箱**、**#8 红绿灯**、**#9 CT 扫描（trace_id）**、**#10 生物学（细胞-神经-记忆架构）**、**#11 乐高（细胞独立部署）**
- **00 第三审判**：无 Lombok/反射/动态代理（getattr 仅请求上下文，已接受）
- **00 修正案 #5 抗抵赖**：签名/验签 + 安全审计日志
- **01 7.2 细胞自治与跨细胞禁令**、**7.4 平台无业务状态**、**7.3 事件语义冻结（event_store 设计）**
- **01 2.1 事件溯源**（schema 含 event_store）、**2.2 多租户**（tenant_id）
- **01 4.4 人性化日志**（_human_audit + trace_id）
- **金额 Long(分)→String(传输)**、**接口规范（X-Request-ID、错误格式、幂等）**
- **01 1.1.1 技术栈例外**：PaaS 核心采用 Python 3.11+ 已在该条款下合规

---

## 四、不符合项优先级汇总

| 优先级 | 条款 | 整改方向 |
|--------|------|----------|
| P0/高 | 敏感数据加密与脱敏实施（00 #4 / 01 2.2） | 各细胞按《敏感数据加密与脱敏规范》落实；CRM/HIS/TMS 已部分实现，推广至全部细胞 |
| P0/高 | 跨细胞消息队列（00 #6 / 01 7.6.1） | 平台事件总线对接（P5）；细胞事件发布/订阅（C6） |
| 高 | 安全态势可视化与审计对接（00 #14 / 01 4.1） | 安全态势区域、审计 API 对接（C5） |
| 高 | 3-Click 与零心智负担验收（00 #12/#13） | 建立验收清单并全量检查 |
| 中 | 暗色模式已实现；无障碍（00 #16） | WCAG 2.1 AA 与读屏测试 |
| 中 | 魔法盾 / 一键求救（01 4.2 / 4.3） | O4 占位与接口设计，再实现 |
| 中 | 沙箱体检（00 #15） | 插件/细胞准入设计时纳入 |
| P2 | AI 原生（01 3.x）、GDPR（01 5.1）、三权分立（01 5.2）、性能与容灾（01 6.x） | 按产品与商用计划分阶段落地 |

---

## 五、与《合规审查报告》的关系

- 本清单**专注不符合项与待完善项**；《合规审查报告_00_01_对照》保留「符合项」与历史整改记录。
- 技术栈：合规审查报告中原「P0 技术栈偏离」在 **01 1.1.1 已存在** 的前提下，应视为**已符合**（PaaS 核心选用 Python 符合 1.1.1）；本清单已按此修正。
- 持续更新：每次发布或重大变更后建议重新跑自检（`./run.sh self_check`）并刷新本清单与合规审查报告。

---

**文档状态**：宪法符合性检查与不符合项清单  
**依据**：00_【最高宪法】SuperPaaS-God v8.0、01_【核心法律】基础与AI安全宪法 V3.0  
**日期**：2026-02-28
