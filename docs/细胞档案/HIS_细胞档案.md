# HIS 细胞档案

**文档版本**：V1.0  
**细胞名称**：HIS（医院信息系统）  
**所属领域**：专业垂直行业  
**约束文档**：《01_【核心法律】基础与AI安全宪法_V3.0》《接口设计说明书_V2.0》《超级PaaS平台逻辑全景图》

---

## 1. 细胞标识

| 项 | 值 |
|----|-----|
| 细胞代码 | `his` |
| 显示名称 | 医院信息系统（HIS） |
| 领域 | 专业垂直行业 |
| 独立部署单元 | 是 |
| 独立数据库 | 是 |
| 档案状态 | 已归档 |

---

## 2. 与平台接口对接细节

### 2.1 API 契约（集装箱原则）

- **Base Path**：`/api/v1/his`
- **协议**：HTTPS，JSON，UTF-8；请求头 `Content-Type`、`Authorization`、`X-Request-ID`；响应头 `Content-Type`、`X-Response-Time`。
- **认证**：OAuth 2.0 + JWT，多租户按平台约定；医疗场景需满足等保及隐私合规（《01_核心法律》隐私保护、数据脱敏）。

### 2.2 核心资源与 URL 设计（示例）

| 资源 | 方法 | 路径示例 |
|------|------|----------|
| 患者/就诊 | GET/POST | `/api/v1/his/patients`、`/api/v1/his/visits` |
| 医嘱/处方 | GET/POST | `/api/v1/his/orders`、`/api/v1/his/prescriptions` |
| 挂号/收费 | GET/POST | `/api/v1/his/registrations`、`/api/v1/his/charges` |

金额遵循 Long(分)→String；错误响应符合《接口设计说明书》3.1.3。涉及个人隐私字段（身份证、手机号、住址）严禁明文完整输出，必须动态脱敏（宪法修正案 #4）。

### 2.3 事件命名与结构

- **事件域**：`his`；格式 `his.[Entity].[Action]`；结构含 eventId、eventType、timestamp、source、traceId、data；**data 中不得包含未脱敏个人敏感信息**。

#### 发布事件

| eventType | 说明 |
|-----------|------|
| `his.patient.registered` | 患者登记（事件内仅业务ID与脱敏信息） |
| `his.visit.started` | 就诊开始 |
| `his.order.created` | 医嘱下达 |
| `his.prescription.issued` | 处方开具 |

#### 订阅事件

| 订阅 eventType | 来源 | 用途 |
|----------------|------|------|
| `lis.sample.received` | LIS | 标本接收状态回写 |
| `lis.result.reported` | LIS | 检验结果回写医嘱 |

---

## 3. 业务配置要点

| 配置项 | 说明 | 默认 |
|--------|------|------|
| 租户隔离 | 与平台一致；大客户可独立 Schema | tenant_id |
| 隐私与脱敏 | 身份证、手机、住址等动态脱敏；日志/界面禁止明文完整展示 | 强制 |
| 审计与合规 | 操作日志 180 天、等保 2.0 三级、GDPR 被遗忘权支持 | 启用 |
| 操作路径深度 | ≤3 次点击 | 必须满足 |

---

## 4. 依赖与协作

- **依赖平台**：认证、API 网关、事件总线、租户、安全感知、隐私合规引擎。
- **与其它细胞**：仅事件或平台转发 HTTP；禁止跨细胞库直连；跨细胞仅异步；跨系统数据交互需数字签名与验签（宪法修正案 #5）。

---

## 5. 合规声明

- 遵守《01_核心法律》第七部分及《接口设计说明书》；遵守宪法修正案 #4（数据主权）、#5（抗抵赖）；接入/下线不修改平台级架构文档。

---

**编制**：SuperPaaS-God v8.0
