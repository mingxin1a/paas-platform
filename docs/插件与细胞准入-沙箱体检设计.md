# 插件与细胞准入：沙箱体检设计

**依据**：00 修正案 #15（细胞壁强化 - 防火墙内建）  
**用途**：任何插件（乐高积木）在运行前必须先通过「沙箱体检」，有毒（漏洞）的积木不能上桌。本文档为架构预留条款，实现时再落地。

---

## 一、宪法要求

- **00 #15**：安全机制必须内建在「细胞」内部，而非外挂。任何插件（乐高积木）在运行前，必须先通过「沙箱体检」，有毒（漏洞）的积木不能上桌。

---

## 二、适用场景

| 场景 | 说明 |
|------|------|
| 第三方细胞/插件接入 | 新细胞或第三方提供的乐高模块在注册/部署前，须通过平台沙箱体检 |
| 细胞镜像/包来源 | 从镜像仓库或制品库拉取的细胞镜像/包，部署前可做漏洞扫描与策略校验 |
| 动态加载能力 | 若平台未来支持热插拔细胞或脚本插件，加载前必须在隔离环境执行沙箱检查 |

---

## 三、沙箱体检内容（设计）

| 检查项 | 说明 |
|--------|------|
| 依赖与漏洞扫描 | 对细胞依赖（如 requirements.txt、package.json）做 CVE 扫描；高危未修复则不准入 |
| 行为基线 | 在隔离环境运行细胞健康检查与轻量请求，检测异常网络/文件/进程行为 |
| 契约与权限 | 细胞声明的 API 与权限与平台策略一致；禁止声明超出平台允许的权限 |
| 签名与来源 | 细胞包/镜像须带签名或来源标识，未签名或来源不可信可拒绝或降级信任 |

---

## 四、实现路径

- **当前**：无插件/乐高热插拔机制，无沙箱实现；在架构文档与《宪法符合性检查与不符合项清单》中已落档「实现时再落地」。
- **后续**：当引入细胞市场、第三方细胞接入或插件运行时，在平台侧增加准入流水线：上传/拉取、沙箱体检（漏洞扫描与行为基线）、通过则允许注册/部署，不通过则拒绝并记录。

---

## 五、与合规清单对应

- 不符合项 #5（沙箱体检）：本设计文档为 00 #15 的架构预留与落档，满足「设计时纳入」要求。

---

**文档状态**：插件与细胞准入 - 沙箱体检设计（架构预留）  
**关联**：00 修正案 #15、《宪法符合性检查与不符合项清单》
