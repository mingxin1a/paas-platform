# 技术栈与《01_核心法律》宪法对照说明

**依据**：《01_核心法律》1.1 技术栈宪法（Java 17+、Spring Boot 3+、DDD 分层强制）。  
**约束**：不得修改《00_最高宪法》与《01_核心法律》；以两文档为最高要求。

---

## 1. 当前状态

- **01 1.1 规定**：强制使用 Java 17+ LTS、Spring Boot 3+、领域驱动设计分层架构。
- **当前实现**：平台核心（网关、注册中心、监控）及细胞为 **Python 3.11+ / Flask** 实现。
- **结论**：与 01 技术栈宪法存在**名义不一致**；架构层面已满足 01 其余条款（细胞自治、事件溯源、多租户、跨细胞禁令、平台无业务状态等）。

---

## 2. 合规路径（不修改 01 的前提下）

- 01 未授权「技术栈例外」条款，故**不得**在 01 中增加“允许 Python 实现”的例外。
- **唯一合规路径**：将 platform 核心（网关、注册中心、监控）按 01 要求**以 Java 17 + Spring Boot 3 重写**，并保持与现有 api_contract、database_schema、事件与网关契约一致。
- **建议**：单独立项（如 `platform-core-java`），与现有 Python 实现并行或逐步替换；迁移期间在合规审查报告中持续标注 P0 待办，直至 Java 版上线并切换。

---

## 3. 迁移计划（建议）

| 阶段 | 动作 |
|------|------|
| 1 | 新建 Java 17 + Spring Boot 3 项目，实现网关（路由、熔断、trace_id、签名/验签、红绿灯）、注册中心、监控与现有 API 契约一致。 |
| 2 | 保持 cells 与网关的接口不变（/api/v1/{cell}、请求头、响应头、错误格式）；cells 可继续为 Python 或逐步迁 Java。 |
| 3 | 部署切换：由当前 Python 网关切换至 Java 网关，验证通过后下线 Python 网关。 |
| 4 | 在合规审查报告中将「01 技术栈宪法」标为已整改。 |

---

**文档状态**：与 01 一致；不修改 01，仅说明现状与合规路径。
