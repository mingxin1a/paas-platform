# 敏感数据加密与脱敏实施清单

**依据**：00 修正案 #4、01 2.2；《敏感数据加密与脱敏规范》  
**用途**：按细胞跟踪敏感字段的加密存储与界面/日志脱敏落实情况，便于逐项闭环。

---

## 一、实施标准

| 层级 | 要求 | 验收标准 |
|------|------|----------|
| 存储 | 敏感列 AES-256 或国密 SM4 加密；密钥 KMS 或环境变量 | schema 注释/列名体现；写入前加密、读取后解密或仅脱敏展示 |
| 界面/API | 动态脱敏，严禁明文完整展示 | 列表/详情返回体经 mask_phone、mask_id_no 等处理 |
| 日志 | 日志中不输出完整手机号、身份证、住址 | 审计/人类可读日志仅输出脱敏后或 trace_id 引用 |

---

## 二、按细胞实施状态

| 细胞 | 敏感字段 | 存储加密 | 界面/API 脱敏 | 日志脱敏 | 备注 |
|------|----------|----------|---------------|----------|------|
| CRM | contactPhone, phone, amountCents | 规范已明确，可选加密列 | ✅ masking.py apply_customer/contact/contract_masking | 需统一经脱敏再写审计 | 试点细胞，可推广 |
| HIS | name, idNo（患者） | 规范已明确 | ✅ store apply_patient_masking | 需统一经脱敏再写审计 | 医疗合规强制 |
| TMS | phone, idNo（司机） | 规范已明确 | ✅ store _mask_phone/_mask_id_no | 需统一经脱敏再写审计 | 已实现 |
| ERP | 身份证、银行账号、金额 | 规范已明确 | 待落实 masking 模块 | 待落实 | 见 C4 推广 |
| SRM | 供应商联系人、银行信息 | 规范已明确 | 待落实 | 待落实 | 见 C4 推广 |
| WMS | 无典型个人敏感字段 | — | — | 审计含 trace_id 即可 | 低优先级 |
| HRM | 员工手机、身份证 | 规范已明确 | 待落实 | 待落实 | 见 C4 推广 |
| OA | 人员通讯录等 | 规范已明确 | 待落实 | 待落实 | 见 C4 推广 |
| MES/PLM/EMS/LIS/LIMS | 按细胞档案敏感字段清单 | 规范已明确 | 待落实 | 待落实 | 按 C4 分批 |

---

## 三、推广动作（C4）

1. **已实现细胞**（CRM、HIS、TMS）：确认所有写审计/日志处不输出明文敏感信息；可选：落库前对 contact_phone 等加密。
2. **待实施细胞**：复制 CRM `masking.py` 模式，按《敏感数据加密与脱敏规范》在细胞内新增 `masking.py`，列表/详情返回前统一经脱敏函数；在 api_contract 或 README 中注明敏感字段清单。
3. **自检**：运行 `./run.sh self_check` 与交付校验；人工抽查各细胞 GET 列表/详情接口返回中敏感字段是否为脱敏形态。

---

## 四、敏感字段速查（按细胞）

- **CRM**：contactPhone, phone（联系人）, amountCents（合同/回款可选脱敏）
- **HIS**：患者 name, idNo
- **TMS**：司机 phone, idNo
- **ERP**：身份证、银行账号、金额（分）
- **SRM**：供应商/联系人电话、银行信息
- **HRM**：员工手机、身份证
- **LIS/LIMS**：患者/委托方标识、结果敏感信息
- **OA**：人员通讯录、审批意见中的个人信息

---

**文档状态**：实施清单，随各细胞 C4 落地更新  
**关联**：《敏感数据加密与脱敏规范》《宪法符合性检查与不符合项清单》C4
