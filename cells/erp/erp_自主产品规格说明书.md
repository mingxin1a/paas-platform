# ERP 自主产品规格说明书

**角色**：首席产品官（CPO）+ 首席架构师（CA）  
**依据**：业界最佳实践（SAP、Oracle ERP、用友/金蝶等）推导。  
**原则**：功能定义开放探索，架构实现封闭（仅 PaaS 网关 + 独立 Schema + @superpaas/ui-components）。

---

## 1. 产品愿景与边界

ERP 细胞为企业提供**可付费的业财一体化能力**：财务总账、应收应付、物料与采购、生产计划、成本与资金，全流程可追溯、可关账。所有能力经 PaaS 标准网关暴露，无外部依赖。

---

## 2. 功能全景（自主推导）

### 2.1 财务总账（GL）

| 功能项 | 描述 | 状态 |
|--------|------|------|
| 科目主数据 | 科目代码、名称、类型（资产/负债/权益/收入/成本） | 已实现 |
| 分录过账 | 借贷分录、凭证号、过账日期、借贷平衡校验 | 已实现 |
| 科目余额 | 按科目、期间汇总借方/贷方/余额 | 本期实现 |
| 期间关账 | 期间锁定，禁止过账 | 规划 |
| 多币种 | 原币、本币、汇率 | 规划 |

### 2.2 应收（AR）/ 应付（AP）

| 功能项 | 描述 | 状态 |
|--------|------|------|
| 应收发票 CRUD | 客户、金额、到期日、状态 | 已实现 |
| 应付发票 CRUD | 供应商、金额、到期日、状态 | 已实现 |
| 收款/付款登记 | 核销发票、收款单/付款单 | 本期实现 |
| 账龄报表 | 按客户/供应商账龄区间汇总 | 本期实现 |
| 付款建议 | 按到期日推荐付款列表 | 规划 |

### 2.3 物料管理（MM）

| 功能项 | 描述 | 状态 |
|--------|------|------|
| 物料主数据 | 编码、名称、单位、标准价 | 已实现 |
| 采购订单 | 供应商、状态、金额 | 已实现 |
| 入库/出库 | 采购入库、销售出库（与 WMS 事件协同） | 规划 |
| 发票校验 | 三单匹配（PO、收货、发票） | 规划 |

### 2.4 生产计划（PP）

| 功能项 | 描述 | 状态 |
|--------|------|------|
| BOM | 产品、版本、子件清单 | 已实现 |
| 工单 | 关联 BOM、计划数量、状态 | 已实现 |
| 工单报工 | 报完工数量、状态推进 | 本期实现 |
| 产能计划 | 工作中心、产能日历（简化） | 规划 |

### 2.5 订单与销售

| 功能项 | 描述 | 状态 |
|--------|------|------|
| 销售订单 | 客户、行项目、总金额、状态 | 已实现（orders） |
| 订单履行 | 与 WMS/物流事件协同 | 规划 |

### 2.6 报表与关账

| 功能项 | 描述 | 状态 |
|--------|------|------|
| 试算表 | 科目余额表数据 API | 本期实现 |
| 凭证列表 | 按期间/科目查询 | 本期实现 |

---

## 3. 本期实现范围（封闭架构交付）

1. **GL**：科目余额查询（按科目汇总借贷余）；凭证列表按期间筛选。  
2. **AR/AP**：收款登记（关联应收发票、核销）；付款登记（关联应付发票、核销）；账龄报表 API。  
3. **PP**：工单报工（报完工数量、状态 完成）。  
4. **报表**：试算表 API（科目+借方+贷方+余额）。

实现约束：同上，仅网关 + 独立 Schema + 平台组件。

---

## 4. 验收标准

- 每个新功能具备验收测试。  
- delivery.package 与 completion.manifest 更新。  
- `./run.sh verify erp` 通过。

---

## 5. 版本

- 当前说明书对应 **ERP v1.1.0**（本期实现完成后）。
