# CRM 细胞 - 用户手册

**版本**：1.2.0 | **细胞**：客户关系管理（CRM）

## 1. 概述

本细胞提供线索、客户、联系人、商机、活动、产品、审批与模板合并等能力，经 PaaS 网关 `/api/v1/crm` 暴露，可与平台标准 UI 组件配合使用。

## 2. 功能入口（API）

| 能力 | 方法 | 路径示例 |
|------|------|----------|
| 健康检查 | GET | /health |
| 线索 | GET/POST/PATCH | /leads, /leads/{id}, /leads/{id}/convert |
| 客户 | GET/POST | /customers, /customers/{id}, /customers/{id}/360 |
| 联系人 | GET/POST | /contacts |
| 商机 | GET/POST | /opportunities, /opportunities/forecast, /opportunities/win-rate |
| 活动 | GET/POST | /activities, /activities/{id}/complete, /activities/todo |
| 产品 | GET/POST | /products |
| 商机行项目 | GET/POST/DELETE | /opportunities/{id}/lines |
| 管道与报表 | GET | /pipeline/summary, /pipeline/funnel, /reports/activity-stats |
| 审批 | GET/POST | /approvals, /approvals/{id}/process |
| 模板合并 | POST | /templates/merge |

所有写操作需提供 `X-Tenant-Id`、`X-Request-ID`（POST/PUT 幂等），详见《接口设计说明书》。

## 3. 典型流程

- **线索转化**：创建线索 → 分配负责人 → 调用 `/leads/{id}/convert` 转化为客户与商机。
- **客户 360°**：调用 `/customers/{id}/360` 获取客户档案、联系人、商机与关系。
- **商机行项目**：创建产品后，在商机下添加行项目，金额自动汇总。

## 4. 约束与合规

- 金额单位：分（Long）。
- 敏感数据：遵循《01_核心法律》动态脱敏。
- 跨细胞：仅通过事件或经网关的异步调用，禁止直连数据库。
