# WMS 工业级测试报告

**版本**：1.0 | **细胞**：WMS | **测试类型**：功能、性能、追溯性

## 1. 测试环境

- 细胞：WMS（Flask），端口 8003
- 请求头：X-Tenant-Id、X-Request-ID（POST）

## 2. 功能测试范围

| 模块 | 用例 | 说明 |
|------|------|------|
| 入库 | 创建/收货/幂等 | 同一 X-Request-ID 重复收货返回 200 |
| 出库 | 创建/发货/防负库存/幂等 | 超可用量返回 BUSINESS_RULE_VIOLATION |
| 调拨 | 创建/幂等 | 源仓库存不足返回 400 |
| 盘点 | 批量 1000+ 条 | 单次≤2000 |
| 冻结/解冻 | 冻结、解冻 | 库存不足不可冻结 |
| 效期预警 | GET /alerts/expiry | daysAhead 可配 |
| 扫码 | /scan/inbound、/scan/outbound | 模拟 |
| 监控 | /metrics | transferCount、expiryAlertCount 等 |

## 3. 性能测试要点

- 库存实时查询（可配合 Redis 缓存由部署实现）。
- 批量盘点 1000+ 物料单次请求成功率与耗时。
- 批次追溯查询（索引见 Schema）。

## 4. 追溯性测试要点

- 批次号、入库/出库单、库位关联一致。
- FIFO 出库顺序与效期一致。

## 5. 通过标准（工业级）

- 出库导致负库存时返回 400 及商用提示，不静默扣减。
- 收货/发货幂等：同一 X-Request-ID 不重复增加/扣减库存。
- 效期预警返回即将过期批次列表。
