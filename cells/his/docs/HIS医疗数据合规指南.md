# HIS 医疗数据合规指南

**版本**：1.0 | **细胞**：HIS

## 1. 医疗数据隐私规范（模拟）

- **患者信息**：姓名、身份证号等敏感字段加密存储（应用层/KMS）；接口返回时脱敏展示（姓名如「张*三」，身份证前4后2）。
- **病历数据**：病历仅支持追加，不支持修改或删除，满足不可篡改要求；操作可审计。
- **操作审计**：所有关键操作（患者/挂号/就诊/处方/收费/住院/病历）写入不可篡改审计日志，GET /audit-logs 可查询，满足医疗数据合规追溯要求。

## 2. 数据安全

- 多租户隔离（X-Tenant-Id）。
- 医生仅能查看本人负责患者：列表接口支持按 X-User-Id（doctorId）过滤。
- 所有写操作记录人性化审计日志，便于追溯。
- 全流程闭环：患者管理→挂号→就诊→处方→收费→住院管理→病历管理，均通过 PaaS 标准化接口，无跨细胞代码耦合。

## 3. 接口幂等与防重复

- 挂号：X-Request-ID 或 body.idempotentKey 幂等。
- 收费单创建：idempotentKey 幂等。
- 处方：同就诊同内容仅允许一条，重复返回 409。

## 4. 核心接口一览

| 方法 | 路径 | 说明 |
|------|------|------|
| GET/POST | /patients | 患者列表（脱敏）、创建 |
| GET/POST | /visits | 就诊列表、创建 |
| GET/POST | /registration | 挂号列表、创建 |
| POST | /prescriptions | 处方开具 |
| GET/POST | /charges | 收费列表、创建；/charges/:id/pay 缴费 |
| GET/POST | /inpatients | 住院列表、住院登记 |
| GET/POST | /medical-records | 病历列表、追加（不可篡改） |
| GET | /audit-logs | 操作审计日志（不可篡改） |
