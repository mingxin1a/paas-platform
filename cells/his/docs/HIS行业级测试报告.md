# HIS 行业级测试报告

**版本**：1.0 | **细胞**：HIS | **测试类型**：合规 / 功能 / 安全

## 1. 合规测试

| 用例 | 说明 | 预期 |
|------|------|------|
| 患者信息脱敏 | GET /patients 返回姓名、身份证脱敏（如 张*三、前4后2） | 通过 |
| 病历不可篡改 | 病历仅 POST /medical-records 追加，无修改/删除接口 | 通过 |
| 就诊记录可审计 | 挂号、处方、收费、病历操作记录人性化审计 | 通过 |
| 医疗数据隐私 | 患者敏感字段加密存储（应用层），展示脱敏 | 通过 |

## 2. 功能测试

| 用例 | 说明 | 预期 |
|------|------|------|
| 挂号幂等 | POST /registration 相同 idempotentKey 返回 200 已存在 | 通过 |
| 收费幂等 | POST /charges 相同 idempotentKey 返回 200 | 通过 |
| 处方防重复 | 同就诊同内容再次 POST /prescriptions 返回 409 | 通过 |
| 欠费提示 | POST /charges/<id>/pay 后若仍有欠费，响应带 message/arrearsCents | 通过 |
| 医生权限 | X-User-Id 下 GET /patients、GET /visits 仅本人患者/就诊 | 通过 |

## 3. 安全测试

| 用例 | 说明 | 预期 |
|------|------|------|
| 医护权限分级 | 患者/就诊列表按 doctorId 过滤 | 通过 |
| 租户隔离 | 多租户数据隔离 | 通过 |
| 验签 | CELL_VERIFY_SIGNATURE=1 时验签 | 通过 |
