# TMS 工业级测试报告

**版本**：1.0 | **细胞**：TMS | **测试类型**：功能、性能、追溯性

## 1. 测试环境

- 细胞：TMS（Flask），端口 8007
- 请求头：X-Tenant-Id、X-Request-ID（POST）、X-User-Id（数据权限）

## 2. 功能测试范围

| 模块 | 用例 | 说明 |
|------|------|------|
| 运单 | 列表/创建/更新，ownerId 过滤 | 数据权限：物流专员只看自己 |
| 运单 | 创建幂等 | 同一 X-Request-ID 返回 409 |
| 车辆/司机 | 列表/创建 | 司机接口返回脱敏 |
| 轨迹 | 记录/按运单查询 | 运单不存在时 400 |
| 到货确认 | 确认 | 运单不存在时商用提示 |
| 费用/对账 | 创建/列表 | - |
| 批量导入 | 运单 ≤500 条 | - |
| 监控 | /metrics | 准时率、费用等 |

## 3. 性能测试要点

- 运输订单列表分页、大数据量响应时间。
- 批量导入 500 条运单成功率与耗时。

## 4. 追溯性测试要点

- 运单→轨迹→到货确认→费用 链路可追溯。
- 操作日志与 requestId/traceId 关联。

## 5. 通过标准（工业级）

- 到货确认时运单不存在返回 400 及「运单不存在，无法对不存在的运单做到货确认」。
- 运输订单创建幂等；带 X-User-Id 时列表仅返回该用户负责订单。
- 司机列表/详情中手机号、身份证为脱敏展示。
